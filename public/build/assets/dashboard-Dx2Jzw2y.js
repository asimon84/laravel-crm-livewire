c3.generate({bindto:"#record-chart",data:{x:"dates",columns:window.chartData,type:"line"},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}},y:{min:0,padding:{bottom:0}}}});new DataTable("#recordTable",{processing:!0,serverSide:!0,ajax:window.route,columns:[{data:"id",name:"id",searchable:!0},{data:"string",name:"string",className:"truncate-text",searchable:!0},{data:"text",name:"text",className:"truncate-text",searchable:!0},{data:"json",name:"json",className:"truncate-text",searchable:!0},{data:"boolean",name:"boolean",searchable:!0},{data:"integer",name:"integer",searchable:!0},{data:"float",name:"float",searchable:!0},{data:"action",name:"action",orderable:!1,searchable:!1}]});new bootstrap.Modal(document.getElementById("recordModal"));$.callModal=function(r,e){var o=$("#record-modal-id"),t=$("#record-modal-string"),l=$("#record-modal-text"),d=$("#record-modal-json"),n=$("#record-modal-boolean"),c=$("#record-modal-integer"),s=$("#record-modal-float");t.prop("disabled",e),l.prop("disabled",e),d.prop("disabled",e),n.prop("disabled",e),c.prop("disabled",e),s.prop("disabled",e),o.val(""),t.val(""),l.html(""),d.val(""),n.val(""),c.val(""),s.val(""),$.ajax({url:"/record/"+r,type:"GET",dataType:"json",success:function(a){o.val(a.id),t.val(a.string),l.html(a.text),d.val(a.json),n.val(a.boolean.toString()),c.val(a.integer),s.val(a.float)},error:function(a,i,m){console.error("AJAX error:",i,m)}})};$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()}});$.editRecord=function(){$.ajax({url:"/record/"+$("#record-modal-id").val(),type:"POST",dataType:"json",data:{string:$("#record-modal-string").val(),text:$("#record-modal-text").html(),json:$("#record-modal-json").val(),boolean:$("#record-modal-boolean").val(),integer:$("#record-modal-integer").val(),float:$("#record-modal-float").val()},success:function(r){$("#recordModal").modal("hide"),$("#recordTable").DataTable().draw()},error:function(r,e,o){console.error("AJAX error:",e,o)}})};$.deleteRecord=function(r,e,o){$.ajax({url:"/record/"+r,type:"DELETE",dataType:"json",success:function(t){e.DataTable().row(o).remove().draw()},error:function(t,l,d){console.error("AJAX error:",l,d)}})};$(document).on("click",".view-record",function(){$("#save-button").hide(),$.callModal($(this).data("id"),!0)});$(document).on("click",".edit-record",function(){$("#save-button").show(),$.callModal($(this).data("id"),!1)});$(document).on("click","#save-button",function(){$.editRecord()});$(document).on("click",".delete-record",function(){$.deleteRecord($(this).data("id"),$("#recordTable"),$(this).closest("tr"))});
